{% extends "base.html" %}
{% block css %}
<link rel="stylesheet" href="{{ STATIC_URL }}libs/jqtree.css">
{% endblock %}
{% block content %}

<div id="tree1"></div>
<div id="tree2"></div>

<ul>
  {% for patient in patients %}
  <li>
  <a href="{% url 'patients.views.patient_summary' patient.id %}">{{ patient }}</a>
  <input type="checkbox" id="patient_{{ patient.id }}">
  <ul>
    {% for sample in patient.sample_set.all %}
    <li><a href="{% url 'samples.views.summary' sample.id %} ">{{ sample }}</a>
    <input type="checkbox" id="sample_{{ sample.id }}">
    </li>
    {% endfor %}
  </ul>
  </li>

  {% endfor %}
</ul>
{% endblock %}

{% block site_js %}
<script type='text/javascript' src="{{ STATIC_URL }}libs/tree.jquery.js"></script>
<script type='text/javascript' src="{{ STATIC_URL }}libs/jquery.cookie.js"></script>

<script>
  $(function() {


    $.getJSON(
    '{% url 'dashboard.views.menu_json' %}',
    function(data) {
      var $tree = $('#tree1');
      $tree.tree({
        data: data
      });

      $tree.bind('tree.click',
      function(e) {
        e.preventDefault();
        var selected_node = e.node;
        if($tree.tree('isNodeSelected', selected_node)) {
          $tree.tree('removeFromSelection', selected_node);
        }
        else {
          $tree.tree('addToSelection', selected_node);
        }
      });
      console.log(data);
    }
    );
  });
</script>
{% endblock %}
